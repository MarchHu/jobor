(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10b397ba"],{"1db2":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-button",{staticStyle:{color:"#e6a23c"},attrs:{type:"text",size:t.size},on:{click:t.handleClick}},[t._v(t._s(t.title))])},i=[],l={name:"delete",props:{size:{default:"mini"},title:{default:"编辑"}},methods:{handleClick:function(t){this.$emit("click",t)}}},o=l,r=a("2877"),s=Object(r["a"])(o,n,i,!1,null,"493c67f8",null);e["a"]=s.exports},"26e4":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%"}},[a("el-pagination",{staticStyle:{margin:"5px 0"},attrs:{small:t.small,"page-size":t.pageSize,"current-page":t.currentPage,"pager-count":t.pagerCount,"page-sizes":t.pageSizes,layout:t.layout,total:t.total},on:{"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"size-change":t.handleSizeChange,"current-change":t.handleIndexChange}})],1)},i=[],l={name:"Pagination",props:{small:{default:function(){return!1}},pageSizes:{require:!0,default:function(){return[5,10,25,50,100,200]}},limit:{default:10},page:{default:function(){return 1}},pagerCount:{default:7},total:{default:0},layout:{type:String,default:"prev, pager, next, jumper,sizes,total"},background:{type:Boolean,default:!0}},data:function(){return{}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},created:function(){},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t})},handleIndexChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize})}}},o=l,r=a("2877"),s=Object(r["a"])(o,n,i,!1,null,"91b9180e",null);e["a"]=s.exports},"5d46":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-button",{staticStyle:{color:"#f56c6c"},attrs:{type:"text",size:t.size},on:{click:t.handleClick}},[t._v(t._s(t.title))])},i=[],l={name:"delete",props:{size:{default:"mini"},title:{default:"删除"}},methods:{handleClick:function(t){this.$emit("click",t)}}},o=l,r=a("2877"),s=Object(r["a"])(o,n,i,!1,null,"11ee4167",null);e["a"]=s.exports},8338:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{margin:"5px 0"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.searchForm,size:"small"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getData(e)}},model:{value:t.searchForm.name,callback:function(e){t.$set(t.searchForm,"name",e)},expression:"searchForm.name"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.getData}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.newRow}},[t._v("新增")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},on:{click:t.getData}},[t._v("刷新")])],1)],1)],1),t._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{border:"",data:t.data_list,size:"small"}},[a("el-table-column",{attrs:{label:"ID",prop:"id",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{label:"名称",prop:"name",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"类型",prop:"lang",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{label:"表达式",prop:"expr",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"任务脚本",prop:"data","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"",width:"70",align:""},scopedSlots:t._u([{key:"default",fn:function(e){return["running"===e.row.status?a("el-popconfirm",{attrs:{"icon-color":"red",icon:"el-icon-info",title:"确认停止任务吗？"},on:{onConfirm:function(a){return t.changeStatus(e.row)}}},[a("el-switch",{attrs:{slot:"reference"},slot:"reference",model:{value:"running"===e.row.status,callback:function(a){t.$set(e.row,"status==='running'",a)},expression:"scope.row.status==='running'"}})],1):a("el-popconfirm",{attrs:{icon:"el-icon-info",title:"确认开始运行任务吗？"},on:{onConfirm:function(a){return t.changeStatus(e.row)}}},[a("el-switch",{attrs:{slot:"reference"},slot:"reference",model:{value:"running"===e.row.status,callback:function(a){t.$set(e.row,"status==='running'",a)},expression:"scope.row.status==='running'"}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"更新时间",prop:"mtime",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("green_button",{attrs:{title:"运行"}}),t._v(" "),a("edit_button",{on:{click:function(a){return t.showEdit(e.row)}}}),t._v(" "),a("delete_button",{on:{click:function(a){return t.confirmDelRows(e.row,e.row.name,!0)}}})]}}])})],1),t._v(" "),a("div",{staticStyle:{"margin-top":"5px"}},[a("div",{staticStyle:{display:"inline"}}),t._v(" "),a("div",{staticClass:"block",staticStyle:{float:"right",display:"inline"}},[a("pagination",{attrs:{total:t.total,page:t.page,limit:t.limit},on:{"update:page":function(e){t.page=e},"update:limit":function(e){t.limit=e},pagination:function(e){return t.getData()}}})],1)])],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.newOrUpdate,"close-on-click-modal":!1,width:"80%"},on:{"update:visible":function(e){t.newOrUpdate=e}}},[a("el-form",{ref:"rowData",attrs:{"label-width":"120px",model:t.rowData,size:"small",rules:t.taskRules}},[a("el-form-item",{attrs:{label:"名称",prop:"name",rules:[{required:!0,message:"请输入名称",trigger:"blur"}]}},[a("el-input",{attrs:{"aria-valuemax":"60"},model:{value:t.rowData.name,callback:function(e){t.$set(t.rowData,"name",e)},expression:"rowData.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入描述内容"},model:{value:t.rowData.description,callback:function(e){t.$set(t.rowData,"description",e)},expression:"rowData.description"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"表达式",prop:"expr"}},[a("el-input",{model:{value:t.rowData.expr,callback:function(e){t.$set(t.rowData,"expr",e)},expression:"rowData.expr"}}),t._v(" "),a("span",{staticStyle:{"font-size":"smaller",color:"#c3c4c9"}},[t._v("注：秒、分、时、天、月、周")])],1),t._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"lang",rules:[{required:!0,message:"请输入代号",trigger:"blur"}]}},[a("el-select",{on:{change:t.changeLang},model:{value:t.rowData.lang,callback:function(e){t.$set(t.rowData,"lang",e)},expression:"rowData.lang"}},[a("el-option",{attrs:{value:"shell",label:"Shell"}}),t._v(" "),a("el-option",{attrs:{value:"api",label:"Api"}}),t._v(" "),a("el-option",{attrs:{value:"python3",label:"Python3"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"执行内容",prop:"data",rules:[{required:!1,message:"请输入执行内容",trigger:"blur"}]}},["api"===t.rowData.lang?a("div",[a("ul",[a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{size:"mini",data:[{}],"empty-text":"please press add new"}},[a("el-table-column",{attrs:{label:"Method","min-width":"30px;"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{disabled:!1,size:"mini",placeholder:"请选择"},model:{value:t.rowData.data.api.method,callback:function(e){t.$set(t.rowData.data.api,"method",e)},expression:"rowData.data.api.method"}},t._l(t.methodOption,(function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}})})),1)]}}],null,!1,4062923349)}),t._v(" "),a("el-table-column",{attrs:{label:"URL","min-width":"100px;"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{disabled:!1,size:"mini"},model:{value:t.rowData.data.api.url,callback:function(e){t.$set(t.rowData.data.api,"url",e)},expression:"rowData.data.api.url"}})]}}],null,!1,3878513001)})],1)],1),t._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{size:"mini",data:t.rowData.data.api.header,"empty-text":" "}},[a("el-table-column",{attrs:{prop:"name",label:"Header头列表","min-width":"100px;"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{disabled:!1,size:"mini"},model:{value:t.rowData.data.api.header[e.$index].key,callback:function(a){t.$set(t.rowData.data.api.header[e.$index],"key",a)},expression:"rowData.data.api.header[scope.$index].key"}})]}}],null,!1,2082958460)}),t._v(" "),a("el-table-column",{attrs:{prop:"age","min-width":"100px;"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{disabled:!1,size:"mini"},model:{value:t.rowData.data.api.header[e.$index].value,callback:function(a){t.$set(t.rowData.data.api.header[e.$index],"value",a)},expression:"rowData.data.api.header[scope.$index].value"}})]}}],null,!1,173246144)}),t._v(" "),a("el-table-column",{attrs:{width:"70px;"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{disabled:!1,size:"mini",icon:"el-icon-delete",type:"danger",circle:""},on:{click:function(a){return t.rowData.data.api.header.splice(e.$index,1)}}})]}}],null,!1,2866644252)})],1),t._v(" "),a("div",{staticStyle:{"margin-left":"11px"}},[a("el-button",{attrs:{disabled:!1,type:"primary",size:"mini"},on:{click:function(e){return t.rowData.data.api.header.push({})}}},[t._v("添加")])],1)],1),t._v(" "),!1===["GET","HEAD"].includes(t.rowData.data.api.method)?a("div",[a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{size:"mini",data:[{}],"empty-text":" "}},[a("el-table-column",{attrs:{prop:"name",label:"Content Type","min-width":"100px;"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!1,size:"mini",filterable:""},model:{value:t.rowData.data.api.content_type,callback:function(e){t.$set(t.rowData.data.api,"content_type",e)},expression:"rowData.data.api.content_type"}},t._l(t.contentTypeOption,(function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}})})),1)]}}],null,!1,1440398723)})],1)],1),t._v(" "),"application/x-www-form-urlencoded"===t.rowData.data.api.content_type?a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{size:"mini",data:t.rowData.data.api.forms,"empty-text":" "}},[a("el-table-column",{attrs:{prop:"name",label:"Form List","min-width":"100px;"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{disabled:!1,size:"mini"},model:{value:t.rowData.data.api.forms[e.$index].key,callback:function(a){t.$set(t.rowData.data.api.forms[e.$index],"key",a)},expression:"rowData.data.api.forms[scope.$index].key"}})]}}],null,!1,1267081766)}),t._v(" "),a("el-table-column",{attrs:{prop:"age","min-width":"100px;"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{disabled:!1,size:"mini"},model:{value:t.rowData.data.api.forms[e.$index].value,callback:function(a){t.$set(t.rowData.data.api.forms[e.$index],"value",a)},expression:"rowData.data.api.forms[scope.$index].value"}})]}}],null,!1,3136122522)}),t._v(" "),a("el-table-column",{attrs:{width:"70px;"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{disabled:!1,size:"mini",icon:"el-icon-delete",type:"danger",circle:""},on:{click:function(a){return t.rowData.data.api.forms.splice(e.$index,1)}}})]}}],null,!1,2521517510)})],1),t._v(" "),a("div",{staticStyle:{"margin-left":"11px"}},[a("el-button",{attrs:{disabled:!1,type:"primary",size:"mini"},on:{click:function(e){return t.rowData.data.api.forms.push({})}}},[t._v("添加")])],1)],1):t._e(),t._v(" "),"application/json"===t.rowData.data.api.content_type?a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{size:"mini",data:[{}],"empty-text":" "}},[a("el-table-column",{attrs:{prop:"name",label:"Raw Requesy Body","min-width":"100px;"}},[a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("editor",{attrs:{theme:"solarized_dark",lang:"json",height:"300",options:{wrap:"free",indentedSoftWrap:!1}},on:{init:t.rowReqBodyInitEditor},model:{value:t.rowData.data.api.payload,callback:function(e){t.$set(t.rowData.data.api,"payload",e)},expression:"rowData.data.api.payload"}})],1)],1)],1)],1):t._e()]):t._e()])]):a("div",{staticStyle:{"margin-top":"5px"}},[a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("editor",{attrs:{theme:"solarized_dark",lang:t.lang[t.rowData.lang],height:"300",options:{wrap:"free",indentedSoftWrap:!1,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!1}},on:{init:t.codeInitEditor},model:{value:t.rowData.data.data,callback:function(e){t.$set(t.rowData.data,"data",e)},expression:"rowData.data.data"}})],1),t._v(" "),a("br")],1)]),t._v(" "),a("el-form-item",{attrs:{label:"告警策略",prop:"alarm_policy",rules:[{required:!0,message:"请输入",trigger:"blur"}]}},[a("el-select",{model:{value:t.rowData.alarm_policy,callback:function(e){t.$set(t.rowData,"alarm_policy",e)},expression:"rowData.alarm_policy"}},t._l(t.alarmMap,(function(e,n,i){return a("el-option",{key:i,attrs:{value:e,label:t.alarmMapZH[e]}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"超时时间",prop:"timeout",rules:[{required:!0,message:"请输入",trigger:"blur"}]}},[a("el-input-number",{staticStyle:{width:"auto"},attrs:{"controls-position":"right",min:-1,max:86400},model:{value:t.rowData.timeout,callback:function(e){t.$set(t.rowData,"timeout",e)},expression:"rowData.timeout"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"失败重试",prop:"retry",rules:[{required:!0,message:"请输入",trigger:"blur"}]}},[a("el-input-number",{staticStyle:{width:"auto"},attrs:{"controls-position":"right",min:0,max:20},model:{value:t.rowData.retry,callback:function(e){t.$set(t.rowData,"retry",e)},expression:"rowData.retry"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"期望返回码",prop:"expect_code",rules:[{required:!0,message:"请输入期望返回码",trigger:"blur"}]}},[a("el-input-number",{staticStyle:{width:"auto"},attrs:{"controls-position":"right"},model:{value:t.rowData.expect_code,callback:function(e){t.$set(t.rowData,"expect_code",e)},expression:"rowData.expect_code"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"期望返回内容"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入期望返回内容"},model:{value:t.rowData.expect_context,callback:function(e){t.$set(t.rowData,"expect_context",e)},expression:"rowData.expect_context"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.newOrUpdate=!1}}},[t._v("取 消")]),t._v(" "),t.rowData.id?a("el-button",{attrs:{plain:!0,type:"warning",loading:t.action_loading},on:{click:function(e){return t.createOrUpdate("PUT",!1,t.rowData.id)}}},[t._v("更新")]):t._e(),t._v(" "),t.rowData.id?t._e():a("el-button",{attrs:{plain:!0,type:"warning",loading:t.action_loading},on:{click:function(e){return t.createOrUpdate("POST",!0)}}},[t._v("保存并继续")]),t._v(" "),t.rowData.id?t._e():a("el-button",{attrs:{plain:!0,type:"primary",loading:t.action_loading},on:{click:function(e){return t.createOrUpdate("POST",!1)}}},[t._v("保 存")])],1)],1)],1)},i=[],l=(a("c5f6"),a("7f7f"),a("26e4")),o=a("5d46"),r=a("1db2"),s=a("d329"),c=a("aa11"),u=a("fe8c"),d=a("01a8"),p={name:"jobor_task",mixins:[u["a"]],data:function(){var t=function(t,e,a){Object(d["isValidCron"])(e,{seconds:!0})?a():a(new Error("cron表达式不正确, 例：* * * * * *"))};return{taskRules:{expr:[{required:!0,trigger:"blur",validator:t}]},rowData:{name:"",lang:"shell",id:"",expr:"* * * * * *",timeout:-1,retry:0,expect_code:0,expect_context:"",alarm_policy:2,description:"",data:{data:"",api:{url:"",method:"GET",content_type:"",payload:"",header:[],forms:[]}}},url:this.$store.state.urls.jobor_task_url,alarmMap:{never:0,always:1,failed:2,success:3},alarmMapZH:{0:"从不",1:"总是",2:"失败",3:"成功"},lang:{shell:"sh",python3:"python",golang:"golang",api:"sh"},apiRow:{url:"",method:"GET",content_type:"",payload:"",header:{},forms:[{}]},headerList:[{}],method:"",methodOption:[{value:"GET",label:"GET"},{value:"HEAD",label:"HEAD"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"PATCH",label:"PATCH"},{value:"DELETE",label:"DELETE"}],content_type:"",contentTypeOption:[{value:"application/json",label:"application/json"},{value:"application/x-www-form-urlencoded",label:"application/x-www-form-urlencoded"}],langExample:{shell:'#!/usr/bin/env sh\nfunction main() {\n    echo "run shell"\n}\n\nmain\n        ',python3:"#!/usr/bin/env python3\ndef main():\n    print(\"run python3\")\n\nif __name__ == '__main__':\n    main()",python:"#!/usr/bin/env python\ndef main():\n    print(\"run python\")\n\nif __name__ == '__main__':\n    main()",golang:'package main\n\nimport "fmt"\n\nfunc main() {\n  fmt.Println("run golang")\n}',nodejs:'#!/usr/bin/env node\nconsole.log("run nodejs")',windowsbat:"tasklist",api:""}}},methods:{showEdit:function(t){this.newOrUpdate=!0,this.title="编辑",this.rowData.id=t.id,this.rowData.name=t.name,this.rowData.data=t.data,this.rowData.lang=t.lang,this.rowData.timeout=Number(t.timeout),this.rowData.expr=t.expr,this.rowData.expect_code=t.expect_code,this.rowData.expect_context=t.expect_context,this.rowData.alarm_policy=t.alarm_policy,this.rowData.description=t.description},newRow:function(){this.newOrUpdate=!0,this.title="添加",this.rowData.id="",this.rowData.name="",this.rowData.lang="shell",this.rowData.timeout=-1,this.rowData.expr="* * * * * *",this.rowData.retry=0,this.rowData.expect_code=0,this.rowData.expect_context="",this.rowData.alarm_policy=2,this.rowData.description="",this.rowData.data={data:this.langExample[this.rowData.lang],api:{url:"",method:"GET",content_type:"",payload:"",header:[],forms:[]}}},changeStatus:function(t){var e=this,a="stop";"running"!==t.status&&(a="running");var n=this.url+"/"+t.id+"/"+a;this.$store.dispatch("common/CreateUpdate",{url:n,method:"PUT",data:{}}).then((function(t){e.$message.success(t.data.message),e.getData()})).catch((function(t){e.getData()}))},changeLang:function(){this.rowData.data.data=this.langExample[this.rowData.lang]||""},codeInitEditor:function(t){t.setAutoScrollEditorIntoView(!0),t.setShowPrintMargin(!1),a("2099"),a("446e"),a("8882"),a("32ff"),a("4e93"),a("4c5b"),a("6c73")},realLogInitEditor:function(t){t.setAutoScrollEditorIntoView(!0),t.setShowPrintMargin(!1),t.on("change",(function(){t.renderer.scrollToLine(Number.POSITIVE_INFINITY)})),a("8a2a"),a("6c73")},rowReqBodyInitEditor:function(t){t.setAutoScrollEditorIntoView(!0),t.setShowPrintMargin(!1),a("818b"),a("6c73")}},mounted:function(){this.getData()},components:{pagination:l["a"],delete_button:o["a"],edit_button:r["a"],user_select:c["a"],green_button:s["a"],editor:a("7c9e")}},m=p,f=a("2877"),h=Object(f["a"])(m,n,i,!1,null,"309ec2c3",null);e["default"]=h.exports},aa11:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("el-select",{attrs:{value:t.selectValue,filterable:"",placeholder:"请选择","collapse-tags":t.collapse_tags,clearable:t.clearable,multiple:!t.single_selection,"allow-create":t.allowCreate},on:{change:t.handleChange}},t._l(t.data_list,(function(t,e){return a("el-option",{key:e,attrs:{label:t.nickname+"<"+t.username+">",value:t.id}})})),1)],1)},i=[],l={name:"user_select",props:{single_selection:{default:!0},clearable:{default:!0},allowCreate:{default:!1},collapse_tags:{default:!0},use_code:{default:!1},selectValue:{required:!1}},data:function(){return{url:this.$store.state.urls.user_url,data_list:[],total:0}},watch:{},methods:{getData:function(){var t=this,e={};this.loading=!0,this.$store.dispatch("common/Query",{url:this.url+"s",data:e}).then((function(e){t.data_list=e.data.data.list,t.total=e.data.data.total})).catch((function(t){}))},handleChange:function(t){this.$emit("update:selectValue",t)}},mounted:function(){this.getData()}},o=l,r=a("2877"),s=Object(r["a"])(o,n,i,!1,null,"7948f68d",null);e["a"]=s.exports},d329:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-button",{staticStyle:{color:"#00c752"},attrs:{type:"text",size:t.size},on:{click:t.handleClick}},[t._v(t._s(t.title))])},i=[],l={name:"green",props:{size:{default:"mini"},title:{default:"title"}},methods:{handleClick:function(t){this.$emit("click",t)}}},o=l,r=a("2877"),s=Object(r["a"])(o,n,i,!1,null,"3a26370b",null);e["a"]=s.exports},fe8c:function(t,e,a){"use strict";a("96cf");var n,i,l=a("3b8d"),o={name:"common_mixin",props:{},data:function(){return{searchForm:{name:""},extraParam:{},search:"",data_list:[],total:0,page:1,limit:10,loading:!1,url:"",action_loading:!1,title:"新增",newOrUpdate:!1,rowData:{}}},computed:{},watch:{},methods:{clickTo:function(t){},getData:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={pageSize:this.limit,pageNumber:this.page},a=Object.assign(e,this.searchForm,this.extraParam),this.loading=!0,t.prev=3,t.next=6,this.$store.dispatch("common/Query",{url:this.url,data:a});case 6:n=t.sent,this.data_list=n.data.data.list,this.total=n.data.data.total,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](3),this.$message.error(t.t0);case 14:return t.prev=14,this.loading=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[3,11,14,17]])})));function e(){return t.apply(this,arguments)}return e}(),createOrUpdate:function(t,e,a){var n=this;this.$refs.rowData.validate((function(i){if(i){var l=JSON.parse(JSON.stringify(n.rowData));"POST"===t&&delete l.id;var o=n.url;a&&(o=o+"/"+a),n.action_loading=!0,n.$store.dispatch("common/CreateUpdate",{url:o,method:t,data:l}).then((function(t){n.$message.success(t.data.message),!1===e&&(n.newOrUpdate=!1),n.getData(),n.action_loading=!1})).catch((function(t){n.action_loading=!1}))}else n.$message.warning("请输入完整数据")}))},showEdit:function(t){this.newOrUpdate=!0,this.title="编辑",this.rowData.id=t.id},newRow:function(){this.newOrUpdate=!0,this.title="添加",this.rowData.id=""},confirmDelRows:function(t,e,a){var n=this;this.$confirm("确认删除数据ID为["+t.id+"]："+e+" 吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.action_loading=!0;var e=n.url;a&&(e=e+"/"+t.id),n.$store.dispatch("common/Delete",{url:e,data:{rows:[t.id]}}).then((function(t){n.$message.success(t.data.message),n.getData(),n.action_loading=!1})).catch((function(t){n.action_loading=!1}))})).catch((function(){n.$message({type:"info",message:"已取消删除"})}))}}},r=o,s=a("2877"),c=Object(s["a"])(r,n,i,!1,null,null,null);e["a"]=c.exports}}]);